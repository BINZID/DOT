<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <title th:text="#{web_title}">BioIDE</title>
    <link rel="shortcut icon" th:href="@{/img/logo.png}" href="/" type="images/x-icon"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content=""/>
    <base th:href="@{/}"/>
    <!-- 引入css -->
    <th:block th:replace="pageFrame/basicsCss :: copy"></th:block>
    <!-- bootstrap-fileinput -->
    <link rel="stylesheet" th:href="@{/plugins/bootstrap-fileinput/css/fileinput.min.css}" type="text/css"/>
</head>
<body class="hold-transition skin-dark fixed sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper">
    <header id="header" class="main-header">
        <!-- 引入Header -->
        <span th:replace="pageFrame/basicsHeader :: copy" />
    </header>
    <!-- 引入 Left side column. contains the sidebar -->
    <span th:replace="pageFrame/basicsMenu :: copy" />
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                <span>数据源管理</span><br/>
                <small>在这里您可以对您的数据源进行管理</small>
            </h1>
            <ol class="breadcrumb">
                <li><a th:href="@{/}" href="/"><i class="fa fa-home"></i> 首页</a></li>
                <li>
                    <a th:href="@{/console/}+${session.teamId}" href="/">
                        <i class="fa fa-users"></i><span th:text="${#strings.length(session.teamName)<13} ? ${session.teamName} : ${#strings.substring(session.teamName,0,10)+'...'}" th:title="${session.teamName}" >团队名称</span></a>
                </li>
                <!-- 
                <li>
                    <a th:href="@{/console/dataset/show/}+${session.datasetID}">
                        <i class="fa fa-database"></i><span th:text="${#strings.length(session.datasetName)<13} ? ${session.datasetName} : ${#strings.substring(session.datasetName,0,10)+'...'}" th:title="${session.datasetName}">数据集名称</span></a>
                </li>
                 -->
                <li class="active"><i class="fa fa-database"></i> 数据源管理</li>
            </ol>
        </section>
        <!-- 内容区 -->
        <section class="content">
            <div class="box box-default box-solid">
                <div class="box-header with-border">
                    <h3 class="box-title">操作</h3>
                    
                    <div class="box-tools pull-right">
                        <button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
                        </button>
                    </div>
                </div>
                <!-- box-body -->
                <div class="box-body">
                    <a class="btn btn-app" th:href="@{/console/datasource/add}" href="/">
                        <i class="fa fa-plus"></i> <span>新建</span>
                    </a>
                    <a class="btn btn-app" onclick="editSelectObject('datasource');">
                        <i class="fa fa-edit"></i> <span>修改</span>
                    </a>
                    <a class="hidden btn btn-app" onclick="removeSelectObject('datasource');">
                        <i class="fa fa-remove"></i> <span>删除</span>
                    </a>
                    
                </div>
            </div>
            <!-- table -->
            <div class="table table-responsive">
            <!-- 个人taxaset列表展示 -->
                <table
                        id="results_table"
                        data-locale="zh-CN"
                        data-classes="table table-hover table-condensed"
                        data-toggle="table"
                        th:attr="data-url=@{/console/datasource/rest/list}"	
                        data-pagination="true"
                        data-side-pagination="server"
                        data-page-list="[10, 20, 30, 50, 100]"
                        data-search="true"
                        data-show-columns="true"
                        data-show-toggle="true"
                        data-toolbar="#toolbar"
                        data-show-export="false"
                        data-show-refresh="true"
                        data-sort-name="inputtime"
                        data-sort-order="desc"
                        data-export-types="['excel', 'txt']">
                    <thead>
                    <tr>
                        <th data-field="select" data-align="center" data-sortable="false"></th>
                        <th data-field="title" data-align="center" data-sortable="true">数据源名称</th>
                        <th data-field="dType" data-align="center" data-sortable="true">数据源类型</th>
                        <th data-field="version" data-align="center" data-sortable="true">版本</th>
                        <th data-field="creater" data-align="center" data-sortable="true">创建人</th>
                        <th data-field="createtime" data-align="center" data-sortable="true">创建时间</th>
                        <th data-field="inputer" data-align="center" data-sortable="true">录入人</th>
                        <th data-field="inputtime" data-align="center" data-sortable="true">录入时间</th>
                        <th data-field="dAbstract" data-align="center" data-sortable="true">摘要</th>
                        <th data-field="dKeyword" data-align="center" data-sortable="true">关键字</th>
                        <th data-field="dLink" data-align="center" data-sortable="true">链接</th>
                        <th data-field="dReference" data-align="center" data-sortable="true">参考文献</th>
                        <th data-field="dVerifier" data-align="center" data-sortable="true">审核专家</th>
                        <th data-field="dRightsholder" data-align="center" data-sortable="true">版权所有者</th>
                        <th data-field="dCopyright" data-align="center" data-sortable="true">版权声明</th>
                        <th data-field="info" data-align="center" data-sortable="true">说明/备注</th>
                        <th data-field="edit" data-align="center" data-sortable="false">操作</th>
                    </tr>
                    </thead>
                </table>
            </div>
        </section>
    </div>
    <footer class="main-footer">
        <th:block th:replace="pageFrame/basicsFooter :: copy"></th:block>
    </footer>
    <!-- Control Sidebar -->
    <span th:replace="pageFrame/basicsControl :: copy" />
    <!-- /.control-sidebar -->
    <!-- Add the sidebar's background. This div must be placed
         immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
</div>
<!-- 引入js -->
<th:block th:replace="pageFrame/basicsJs :: copy"></th:block>
<!-- bootstrap-fileinput -->
<script th:src="@{/plugins/bootstrap-fileinput/js/fileinput.min.js}"></script>
<script th:src="@{/plugins/bootstrap-fileinput/themes/fa/theme.min.js}"></script>
<script th:src="@{/plugins/bootstrap-fileinput/js/locales/zh.js}"></script>
<!-- page_script -->
<script th:src="@{/js/tableScript.js}"></script>
</body>
<script type="text/javascript">
	$(function() {
		$('#results_table').bootstrapTable('hideColumn', 'inputer');
		$('#results_table').bootstrapTable('hideColumn', 'inputtime');
		$('#results_table').bootstrapTable('hideColumn', 'creater');
		$('#results_table').bootstrapTable('hideColumn', 'createtime');
		$('#results_table').bootstrapTable('hideColumn', 'dAbstract');
		$('#results_table').bootstrapTable('hideColumn', 'dAbstract');
		$('#results_table').bootstrapTable('hideColumn', 'dKeyword');
		$('#results_table').bootstrapTable('hideColumn', 'dLink');
		$('#results_table').bootstrapTable('hideColumn', 'dReference');
		$('#results_table').bootstrapTable('hideColumn', 'dReference');
	});
</script>


<script type="text/javascript">
//初始化fileinput控件（第一次初始化）
 	$("#uploadfile").fileinput({
		language: 'zh', //设置语言
		uploadUrl: "/console/datasource/rest/upload", //上传的地址(访问接口地址)
		allowedFileExtensions: ['xls', 'xlsx'],//接收的文件后缀
		uploadAsync: true,  //默认异步上传
		showBrowse:true, 	//是否显示浏览按钮
		showUpload: false, //是否显示上传按钮
		showRemove : false, //显示移除按钮
		showPreview : true, //是否显示预览
		showCaption: false,//是否显示标题
		dropZoneEnabled: false,
		browseClass: "btn btn-app", //按钮样式  
		dropZoneEnabled: false,//是否显示拖拽区域
		maxFileCount:100,	//表示允许同时上传的最大文件个数
	    maxFileSize:50000,	//单位为kb，如果为0表示不限制文件大小
        uploadExtraData: function(previewId, index) {   //额外参数的关键点
            var obj = {};
            obj._csrf = $('input[name="_csrf"]').val();
            return obj;
        } 
	}).on("filebatchselected", function(event, files) {  
    	$(this).fileinput("upload");  
	}).on("fileuploaded", function(event, data) {  
			if(data.response){  
				layer.msg("上传成功", function () { });
			}  
	}); 
</script>
</html>