<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<!--
    Title:消息编辑页
    Description：消息编辑页
    Author：WangTianshan (王天山)
    Created date: 2017/9/15 21:35
    Copyright: The Research Group of Biodiversity Informatics (BiodInfo Group) - 中国科学院动物研究所生物多样性信息学研究组
    Version: Html5
 -->
<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <title th:text="#{web_title}">BioIDE&nbsp;物种数据采集系统</title>
    <link rel="shortcut icon" th:href="@{/images/logo-black.png}" href="/images/logo.png" type="images/x-icon"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="description" content=""/>
    <!-- 引入css -->
    <!-- Select2 4.0.3 -->
    <link rel="stylesheet" th:href="@{/plugins/select2/css/select2.min.css}" type="text/css"/>    
    <span th:substituteby="pageFrame/basicsCss :: copy" />
</head>
<body class="hold-transition skin-dark fixed sidebar-mini">
<!-- Site wrapper -->
<div class="wrapper" align="left">
   <header id="header" class="main-header">
       <!--  引入Header -->
        <span th:replace="pageFrame/basicsHeader :: copy" />
    </header>
    <!-- 引入 Left side column. contains the sidebar -->
    <span th:replace="pageFrame/basicsMenu :: copy" />
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">
        <!-- Content Header (Page header) -->
        <section class="content-header">
            <h1>
                团队邀请
                <small>在这里您可以向用户发出团队邀请</small>
            </h1>
            <ol class="breadcrumb">
                <li><a th:href="@{/}" href="/"><i class="fa fa-home"></i> 首页</a></li>
                <li class="active"><i class="fa fa-envelope"></i> 消息管理</li>
            </ol>
        </section>
        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-md-9">
                    <div class="box box-primary">
                        <div class="box-body">
                            <form id="thisForm" th:action="@{/console/message/invite}" method="post" th:object="${thisMessage}">
                                <input id="errorMsg" th:value="${errorMsg}" class="hidden" readonly="readonly"></input>
                                <input class="hidden" id="base_url" name="base_url" readonly="readonly"></input>
                                <input class="hidden" th:field="*{sender}" id="sender" name="sender" th:value="${thisMessage.sender}">
                                <input class="hidden" th:field="*{teamid}" id="teamId" name="teamId" th:value="${thisMessage.teamid}">
                                <input class="hidden" th:field="*{type}" id="type" name="type" th:value="${thisMessage.type}">
                                <!-- 可输可选下拉框 -->
                                <div class="form-group">
					                <select class="form-control select2" id="email" name="email" style="width: 100%;"></select>
								</div>
                                
                                <div class="form-group">
                                    <input th:field="*{title}" class="form-control" id="title" name="title" placeholder="主题:" value="${thisMessage.title}">
                                </div>
                                
                                <div class="form-group">
	                                <textarea th:field="*{text}" class="form-control" id="editor" name="editor" style="height: 300px" value="${thisMessage.text}">
									</textarea>
								</div>
	                            <div class="box-footer pull-right">
	                                <a type="reset" class="btn btn-default" onclick="clearInput();"><i class="fa fa-times"></i> 清除</a>
                                 	<!-- <a class="btn btn-primary" onclick="sendEmail()"><i class="fa fa-envelope-o"></i> 发送</a> -->
                                 	<button type="submit" class="btn btn-primary"><i class="fa fa-envelope-o"></i>发送</button>
                            	</div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>
    <!-- content-wrapper -->
    <footer class="main-footer">
        <span th:replace="pageFrame/basicsFooter :: copy" />
    </footer>
    <!-- Control Sidebar -->
    <span th:replace="pageFrame/basicsControl :: copy" />
    <!-- Add the sidebar's background. This div must be placed immediately after the control sidebar -->
    <div class="control-sidebar-bg"></div>
</div>

<!-- 引入js【body末尾引入js文件会使页面加载更快】 -->
<span th:replace="pageFrame/basicsJs :: copy" ></span>
<!-- page_script -->
<script th:src="@{/js/superTableScript.js}"></script>
<!-- ckeditor -->
<script th:src="@{/plugins/ckeditor/ckeditor.js}"></script>
<!-- bootstrapValidator -->
<script th:src="@{/plugins/bootstrapValidator/js/bootstrapValidator.min.js}"></script>
<script th:src="@{/plugins/bootstrapValidator/js/language/zh_CN.js}"></script>
<script>
	window.onload = function()
	{
	    CKEDITOR.replace('editor',{  width: '100%' });
	};
</script>

<script type="text/javascript">
  //初始化插件语言变量
  var datetimepickerLanguage="en";
</script>
<!-- Select2 4.0.3 -->
<script th:src="@{/plugins/select2/js/select2.full.min.js}"></script>
<!-- 引入Script -->
<script th:src="@{/js/taxon/selectScript.js}"></script>
<script th:src="@{/js/composeScript.js}"></script>

<!-- page_script -->
<script th:inline="javascript">
    /*<![CDATA[*/
    var warning_Illegal= [[#{warning_Illegal}]];
    /*]]>*/
</script>
<script type="text/javascript">
function sendEmail() {
	layer.load(2);
	var obj = $('#thisForm').serialize();
	var url = "/console/message/invite";
	$.ajax({
        type: "POST",
        url: url,
        data: obj,	// 要提交的表单
        dataType: "json",
        contentType : 'application/x-www-form-urlencoded; charset=UTF-8',
        success: function (msg) {
        	layer.msg(msg.sendMsg, {time: 1500});
        }
	});
}
</script>

</body>
</html>